<!DOCTYPE html>
<html>

<head>
	<title>mongodb</title>

</head>

<body>

<header>
	<h1>Too Fast Family HD: The Web App</h1>
</header>

<main>
<section id="characters">
	<h2>Characters:</h2>
	<ul id="characters-list">
	
	</ul>
</section>

<section id="items">
	<h2>Items:</h2>
	<ul id="items-list">

	</ul>
</section>

</main>
<script>
	function write_characters_list (data){
		let list = "";
		for(let i=0; i<data.length; i++) {
			list += "<li><a href=\"/characters/"+data[i]._id+"\">"+data[i].name+"</a></li>";
		}
		document.getElementById("characters-list").innerHTML = list;
	}

	let characters_interval= setInterval(function() {
		fetch("/characters")
		.then(response => response.json())
		.then(data => write_characters_list(data));
	}());

	characters_interval= setInterval(function() {
		fetch("/characters")
		.then(response => response.json())
		.then(data => write_characters_list(data));
	}, 2000);


	function write_items_list (data){
    	let list = "";
 
        for (let i = 0; i < data.length; i++){
        	list += "<li>"+data[i].name + "</li>";
       	}
		document.getElementById("items-list").innerHTML = list;
    }

	let items_interval= setInterval(function() {
		fetch("/items")
		.then(response => response.json())
		.then(data => write_items_list(data));
	}());

	items_interval= setInterval(function() {
		fetch("/items")
		.then(response => response.json())
		.then(data => write_items_list(data));
	}, 2000);


</script>

</body>

</html>
